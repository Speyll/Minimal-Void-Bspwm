#!/bin/bash
# Time
get_time() {
    printf "%s\\n" "$(date +'%H:%M')"
}

# Battery
get_battery() {
    battery_status=$(cat /sys/class/power_supply/BAT0/status)
    battery_percent=$(cat /sys/class/power_supply/BAT0/capacity)
    case "$battery_status" in
        Charging)
            printf "%s%%\\n" "${battery_percent}"
            ;;
        Discharging)
            if [ "$battery_percent" -gt 80 ]
            then
                printf "%s%%\\n" "${battery_percent}"
            elif [ "$battery_percent" -gt 30 ]
            then
                printf "%s%%\\n" "${battery_percent}"
            else
                printf "%s%%\\n" "${battery_percent}"
            fi
            ;;
        Unknown|Full) printf "%s%%\\n" "100";;
    esac
}

# Network
get_network() {
    network_id=$(/sbin/iwgetid -r)
    if [ -n "$network_id" ]
    then
        printf "%s\\n" "${network_id}"
    else
        printf "%s\\n" "offline"
    fi
}

# Get them all
get_all() {
echo -e "Time: $(get_time) | Wi-fi: $(get_network) | Battery: $(get_battery)"
}

# Notify them
echo -e "$(get_all)" | dmenu -i -p "you are doing good"
